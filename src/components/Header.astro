---
import LanguageSwitcher from '@/components/LanguageSwitcher.astro';
import ThemeToggle from '@/components/ThemeToggle.astro';
import { useTranslations, defaultLocale } from '@/i18n';
import type { Locale } from '@/i18n';

interface Props {
  lang: Locale;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const prefix = lang === defaultLocale ? '' : `/${lang}`;

const navItems = [
  {
    title: t('nav.experience'),
    label: 'experiencia',
    url: `${prefix}/#experiencia`,
  },
  {
    title: t('nav.projects'),
    label: 'proyectos',
    url: `${prefix}/#proyectos`,
  },
  {
    title: t('nav.about'),
    label: 'sobre-mi',
    url: `${prefix}/#sobre-mi`,
  },
  {
    title: t('nav.contact'),
    label: 'contacto',
    url: 'mailto:luisalmenarez0428@gmail.com',
  },
];
---

<header
  x-data="{ scrolled: false }"
  x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 20 }, { passive: true })"
  class="fixed top-0 z-50 w-full"
>
  <nav
    class="grid grid-cols-[1fr_auto_1fr] items-center max-w-7xl mx-auto px-4 py-3"
  >
    <div></div>

    <div
      class="flex items-center gap-x-1 text-sm font-medium text-gray-600 dark:text-gray-300 rounded-full px-2 py-1 border transition-all duration-300"
      x-bind:class="scrolled ? 'bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg border-b border-gray-300/50 dark:border-gray-700/30 shadow-sm' : 'bg-transparent border-transparent'"
    >
      {
        navItems.map((link: { title: string; label: string; url: string }) => (
          <a
            class="relative block px-3 py-1.5 transition rounded-full hover:text-indigo-500 dark:hover:text-indigo-400"
            aria-label={link.label}
            href={link.url}
          >
            {link.title}
          </a>
        ))
      }
    </div>

    <div
      class="flex items-center justify-end gap-x-1 text-sm font-medium text-gray-600 dark:text-gray-300"
    >
      <LanguageSwitcher />
      <ThemeToggle />
    </div>
  </nav>
</header>
